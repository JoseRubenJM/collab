{"ast":null,"code":"import _asyncToGenerator from \"/Users/jose/Desktop/proyects/fluid-angular/FluidAngular/collaborative-textarea/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n/*!\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\nexport function getNormalizedObjectStoragePathParts(path) {\n  let normalizePath = path;\n  if (normalizePath.startsWith(\"/\")) {\n    normalizePath = normalizePath.substr(1);\n  }\n  if (normalizePath.endsWith(\"/\")) {\n    normalizePath = normalizePath.substr(0, normalizePath.length - 1);\n  }\n  if (normalizePath.length > 0) {\n    return normalizePath.split(\"/\");\n  }\n  return [];\n}\nexport function listBlobsAtTreePath(_x, _x2) {\n  return _listBlobsAtTreePath.apply(this, arguments);\n}\n//# sourceMappingURL=objectstorageutils.js.map\nfunction _listBlobsAtTreePath() {\n  _listBlobsAtTreePath = _asyncToGenerator(function* (inputTree, path) {\n    var _a, _b;\n    const pathParts = getNormalizedObjectStoragePathParts(path);\n    let tree = inputTree;\n    while (((_a = tree) === null || _a === void 0 ? void 0 : _a.entries) !== undefined && pathParts.length > 0) {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      const part = pathParts.shift();\n      const index = tree.entries.findIndex(value => {\n        if (value.type === \"Tree\" && value.path === part) {\n          return true;\n        } else {\n          return false;\n        }\n      });\n      if (index === -1) {\n        tree = undefined;\n      } else {\n        const treeEntry = tree.entries[index];\n        tree = treeEntry.value;\n      }\n    }\n    if (((_b = tree) === null || _b === void 0 ? void 0 : _b.entries) === undefined || pathParts.length !== 0) {\n      throw new Error(\"path does not exist\");\n    }\n    return tree.entries.filter(e => e.type === \"Blob\").map(e => e.path);\n  });\n  return _listBlobsAtTreePath.apply(this, arguments);\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}